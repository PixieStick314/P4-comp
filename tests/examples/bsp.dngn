Map (8, 8) map {
    layer terrain = 0
    procedure {
        let tree = bsp(terrain, 2)
        tree.left.left = create_room(tree.left.left)
        tree.left.right = create_room(tree.left.right)
        tree.right.left = create_room(tree.right.left)
        tree.right.right = create_room(tree.right.right)
        terrain = departition(tree)
    }
}

def create_room(matrix) {
    let tileset = ["#","*","@","&"]
    let tile = random in tileset

    for i in 0..len(matrix) {
        for j in 0..len(matrix[i]) {
            matrix[i][j] = tile
        }
    }

    return matrix
}